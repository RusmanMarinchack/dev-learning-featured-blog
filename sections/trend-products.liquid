{{ 'trend-products.css' | asset_url | stylesheet_tag }}
{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}

<script src="{{ 'swiper-bundle.min.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'trend-products.js' | asset_url }}" defer="defer"></script>

<section class="trend-products" id="{{ section.id }}">
    <div class="trend-products__container">
        <div class="trend-product__box-slider swiper js-trend-products-slider">
          <div class="trend-products__wrapper swiper-wrapper">

            {% for block in section.blocks %}
              {%- assign block_settings = block.settings -%}
              {%- assign image = block_settings.card_image -%}

              <div class="trend-products__item swiper-slide">
                {% if block.settings.product_1 != empty %}
                  {% assign product = block.settings.product_1 %}

                  <div class="trend-products__box-spot">
                    <button class="trend-products__btn-plus js-btn-plus" style="top: {{ block_settings.spot_vertical_position_1 }}%; left: {{ block_settings.spot_horizontal_position_1 }}%;">
                      <img class="trend-products__icon-plus" src="{{ 'plus.svg' | asset_url }}" alt="Plus">
                    </button>
                    <div class="trend-products__popup js-popup">
                      <a class="trend-products__popup-box-img" href="{{ product.url }}">

                        {%- if product.featured_image -%}
                          <img class="trend-products__popup-img" src="{{ product.featured_image | image_url: width: 64 }}" srcset="{{ product.featured_image | image_url: width: 64 }} 1x, {{ product.featured_image | image_url: width: 128 }} 2x" alt="{{ product.featured_image.alt | ascape }}">
                        {% else %}
                          <img class="trend-products__popup-img" src="{{ 'def.png' | asset_url: '64x' }}" srcset="{{ 'def.png' | asset_url: '64x' }}, {{ 'def.png' | asset_url: '128x' }}" alt="{{ product.featured_image.alt | escape }}">
                        {%- endif -%}

                      </a>
                      <div class="trend-products__popup-description">
                        <a href="{{ product.url }}" class="trend-products__popup-title">{{ product.title }}</a>
                        <div class="trend-products__popup-price">{{ product.price }}</div>
                        <a class="trend-products__popup-link" href="{{ product.url }}">Add to cart</a>
                      </div>
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.product_2 != empty %}
                  {% assign product = block.settings.product_2 %}

                  <div class="trend-products__box-spot">
                    <button class="trend-products__btn-plus js-btn-plus" style="top: {{ block_settings.spot_vertical_position_2 }}%; left: {{ block_settings.spot_horizontal_position_2 }}%;">
                      <img class="trend-products__icon-plus" src="{{ 'plus.svg' | asset_url }}" alt="Plus">
                    </button>
                    <div class="trend-products__popup js-popup">
                      <a class="trend-products__popup-box-img" href="{{ product.url }}">

                        {%- if product.featured_image -%}
                          <img class="trend-products__popup-img" src="{{ product.featured_image | image_url: width: 64 }}" srcset="{{ product.featured_image | image_url: width: 64 }} 1x, {{ product.featured_image | image_url: width: 128 }} 2x" alt="{{ product.featured_image.alt | escape }}">
                        {% else %}
                          <img class="trend-products__popup-img" src="{{ 'def.png' | asset_url: '64x' }}" srcset="{{ 'def.png' | asset_url: '64x' }}, {{ 'def.png' | asset_url: '128x' }}" alt="{{ product.featured_image.alt | escape }}">
                        {%- endif -%}

                      </a>
                      <div class="trend-products__popup-description">
                        <a class="trend-products__popup-title" href="{{ product.url }}">{{ product.title }}</a>
                        <div class="trend-products__popup-price">{{ product.price }}</div>
                        <a class="trend-products__popup-link" href="{{ product.url }}">Add to cart</a>
                      </div>
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.product_3 != empty %}
                  {% assign product = block.settings.product_3 %}

                  <div class="trend-products__box-spot">
                    <button class="trend-products__btn-plus js-btn-plus" style="top: {{ block_settings.spot_vertical_position_3 }}%; left: {{ block_settings.spot_horizontal_position_3 }}%;">
                      <img class="trend-products__icon-plus" src="{{ 'plus.svg' | asset_url }}" alt="Plus">
                    </button>
                    <div class="trend-products__popup js-popup">
                      <a class="trend-products__popup-box-img" href="{{ product.url }}">

                        {%- if product.featured_image -%}
                          <img class="trend-products__popup-img" src="{{ product.featured_image | image_url: width: 64 }}" srcset="{{ product.featured_image | image_url: width: 64 }} 1x, {{ product.featured_image | image_url: width: 128 }} 2x" alt="{{ product.featured_image.alt | escape }}">
                        {% else %}
                          <img class="trend-products__popup-img" src="{{ 'def.png' | asset_url: '64x' }}" srcset="{{ 'def.png' | asset_url: '64x' }}, {{ 'def.png' | asset_url: '128x' }}" alt="{{ product.featured_image.alt | escape }}">
                        {%- endif -%}

                      </a>
                      <div class="trend-products__popup-description">
                        <a class="trend-products__popup-title" href="{{ product.url }}">{{ product.title }}</a>
                        <div class="trend-products__popup-price">{{ product.price }}</div>
                        <a class="trend-products__popup-link" href="{{ product.url }}">Add to cart</a>
                      </div>
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.product_4 != empty %}
                  {% assign product = block.settings.product_4 %}

                  <div class="trend-products__box-spot">
                    <button class="trend-products__btn-plus js-btn-plus" style="top: {{ block_settings.spot_vertical_position_4 }}%; left: {{ block_settings.spot_horizontal_position_4 }}%;">
                      <img class="trend-products__icon-plus" src="{{ 'plus.svg' | asset_url }}" alt="Plus">
                    </button>
                    <div class="trend-products__popup js-popup">
                      <a class="trend-products__popup-box-img" href="{{ product.url }}">

                        {%- if product.featured_image -%}
                          <img class="trend-products__popup-img" src="{{ product.featured_image | image_url: width: 64 }}" srcset="{{ product.featured_image | image_url: width: 64 }} 1x, {{ product.featured_image | image_url: width: 128 }} 2x" alt="{{ product.featured_image.alt | escape }}">
                        {% else %}
                          <img class="trend-products__popup-img" src="{{ 'def.png' | asset_url: '64x' }}" srcset="{{ 'def.png' | asset_url: '64x' }}, {{ 'def.png' | asset_url: '128x' }}" alt="{{ product.featured_image.alt | escape }}">
                        {%- endif -%}

                      </a>
                      <div class="trend-products__popup-description">
                        <a class="trend-products__popup-title" href="{{ product.url }}">{{ product.title }}</a>
                        <div class="trend-products__popup-price">{{ product.price }}</div>
                        <a class="trend-products__popup-link" href="{{ product.url }}">Add to cart</a>
                      </div>
                    </div>
                  </div>
                {% endif %}

                <div class="trend-products__box-img">

                  {%- if image -%}
                    <picture>
                      <source media="(max-width: 767.98px)" srcset="{{ image | image_url: width: 734 }} 1x, {{ image | image_url: width: 1468 }} 2x">
                      <source media="(max-width: 991.98px)" srcset="{{ image | image_url: width: 476 }} 1x, {{ image | image_url: width: 952 }} 2x">
                      <source media="(max-width: 1279.98px)" srcset="{{ image | image_url: width: 405 }} 1x, {{ image | image_url: width: 810 }} 2x">
                      <img src="{{ image | image_url: width: 396 }}" srcset="{{ image | image_url: width: 396 }} 1x, {{ image | image_url: width: 792 }} 2x" alt="{{ image.alt | escape }}" class="trend-products__img">
                    </picture>
                  {%- else -%}
                    <picture>
                      <source media="(max-width: 767.98px)" srcset="{{ 'def.png' | asset_img_url: '734x'}} 1x, {{ 'def.png' | asset_img_url: '1468x'}} 2x">
                      <source media="(max-width: 991.98px)" srcset="{{ 'def.png' | asset_img_url: '476x'}} 1x, {{ 'def.png' | asset_img_url: '952x'}} 2x">
                      <source media="(max-width: 1279.98px)" srcset="{{ 'def.png' | asset_img_url: '405x'}} 1x, {{ 'def.png' | asset_img_url: '810x'}} 2x">
                      <img src="{{ 'def.png' | asset_img_url: '396x'}}" srcset="{{ 'def.png' | asset_img_url: '396x'}} 1x, {{ 'def.png' | asset_img_url: '792x'}} 2x" alt="Image" class="trend-products__img">
                    </picture>
                  {%- endif -%}

                </div>
              </div>
            {% endfor %}

          </div>
          <div class="trend-products__swiper-pagination swiper-pagination"></div>
        </div>
    </div>
</section>

{% schema %}
{
  "name": "Trend products",
  "settings": [],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "limit": 4,
      "settings": [
        {
          "type": "image_picker",
          "id": "card_image",
          "label": "Card image"
        },
        {
          "type": "header",
          "content": "Product 1"
        },
        {
          "type": "product",
          "id": "product_1",
          "label": "Product 1"
        },
        {
          "type": "range",
          "id": "spot_horizontal_position_1",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Spot horizontal position",
          "default": 16
        },
        {
          "type": "range",
          "id": "spot_vertical_position_1",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Spot vertical position",
          "default": 16
        },
        {
          "type": "header",
          "content": "Product 2"
        },
        {
          "type": "product",
          "id": "product_2",
          "label": "Product 2"
        },
        {
          "type": "range",
          "id": "spot_horizontal_position_2",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Spot horizontal position",
          "default": 16
        },
        {
          "type": "range",
          "id": "spot_vertical_position_2",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Spot vertical position",
          "default": 16
        },
        {
          "type": "header",
          "content": "Product 3"
        },
        {
          "type": "product",
          "id": "product_3",
          "label": "Product 3"
        },
        {
          "type": "range",
          "id": "spot_horizontal_position_3",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Spot horizontal position",
          "default": 16
        },
        {
          "type": "range",
          "id": "spot_vertical_position_3",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Spot vertical position",
          "default": 16
        },
        {
          "type": "header",
          "content": "Product 4"
        },
        {
          "type": "product",
          "id": "product_4",
          "label": "Product 4"
        },
        {
          "type": "range",
          "id": "spot_horizontal_position_4",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Spot horizontal position",
          "default": 16
        },
        {
          "type": "range",
          "id": "spot_vertical_position_4",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Spot vertical position",
          "default": 16
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trend products"
    }
  ]
}

{% endschema %}